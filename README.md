# 陈一发儿直播助手浏览器扩展

该浏览器扩展会在访问 **YouTube** 时自动检测是否已登录账号，并在确认已登录后，抓取 `https://www.youtube.com/@chenyifaer/streams` 页面上的全部直播视频信息，直接在页面右上角以列表形式展示，同时输出详细的调试信息，便于排查问题。

## 功能概览

- ✅ 自动检测 YouTube 登录状态，未登录时给予明显提示。
- ✅ 登录后自动请求“陈一发儿”频道的直播列表，并解析标题、观看数、开播时间等信息。
- ✅ 在页面右上角呈现交互面板，支持手动刷新、折叠、展开调试日志、复制日志等操作。
- ✅ 内置详尽的调试日志记录，可实时观察扩展行为，也可一键复制快照。

## 安装使用

1. 打开 Chrome/Edge 等基于 Chromium 的浏览器，访问 `chrome://extensions/`。
2. 在右上角启用“开发者模式”。
3. 点击“加载已解压的扩展程序 (Load unpacked)”。
4. 选择本仓库中的 [`extension/`](./extension) 目录。
5. 完成后前往 `https://www.youtube.com/`，扩展会自动注入。

> 如需调试，可在扩展管理页点击“背景页”或在页面打开控制台，所有扩展日志都会以 `ChenYiFaer Live Helper` 前缀输出。

## 使用说明

- **未登录时**：扩展会在面板中高亮提示“未登录”，不会发起直播列表请求。
- **登录后**：扩展会自动拉取直播列表，并在面板中展示所有条目。
- **手动刷新**：点击面板右上角的“手动刷新”按钮，可立即重新抓取数据。
- **调试信息**：
  - 点击“调试面板”可展开/收起详细日志。
  - 点击“复制日志”可将当前日志复制到剪贴板，便于反馈或分析。
  - 日志同时输出在浏览器控制台中。
- **面板折叠**：若面板遮挡视图，可使用“折叠”按钮只保留标题行。

## 目录结构

```
extension/
├─ manifest.json      # 浏览器扩展清单（Manifest V3）
├─ contentScript.js   # 注入到 YouTube 页面的核心脚本
└─ styles.css         # 扩展面板样式
```

## 调试提示

- 由于 YouTube 采用 SPA 架构，扩展监听了 `yt-navigate-finish` 与 `yt-page-data-updated` 事件，以便在页面跳转后自动刷新数据。
- 扩展内置了 5 秒一次的登录状态巡检，可在登录或退出后自动更新面板表现。
- 若调试日志未能复制，请确认浏览器是否允许扩展访问剪贴板；在某些环境中需要用户进行额外授权。

## 兼容性

- 目前仅针对 Chromium 内核浏览器（Chrome、Edge、Brave 等）测试。
- 若需在 Firefox 中使用，需要针对 Manifest V3 做适配调整。

欢迎根据需求继续扩展功能，例如添加通知、与其他频道联动等。祝使用愉快！
